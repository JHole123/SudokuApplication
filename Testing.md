# Testing

## Indev testing

### GenerateGraphicalCandidates display bug

Commit a576ff4, October 19th 2022

In GenerateGraphicalCandidates there is a function that iterates over all 81 tiles and checks the candidates of each. It checks which candidates are available for that tile and adds it to a string to display as the small numbers the user sees on the board. This function had a strange bug where iterating from 0 to 9 caused issues; changing it to a 1 to 10 iteration solved this. This was because the iterator value was not aligned properly with the array use case. In addition, the string was not displaying new lines in the tile despite having newline terminators included in the string - this is because windows forms text boxes need full returns rather than just new line terminators to create newlines. "\n" -> "\r\n". This bug resulted in very wonky formatting of the small numbers in sudoku tiles, although technically it was functional (you could see all the numbers since wrap is enabled).

### Drag and drop bug

Commit 35287a7, November 7th 2022

The drag and drop code was initially programmed to simply edit the text boxes that represent the sudoku board, based on the text file that was dropped in. However, the system was changed to allow an internal representation of the data, which GenerateGraphicalCandidates would then push onto the graphical display from. This meant that the drag and drop system would often conflict with the GenerateGraphicalCandidates function, and simply not work. The drag and drop function was changed to edit the internal representation and then call GenerateGraphicalCandidates to "flush" the data into the graphical representation. 

### GenerateGraphicalCandidates input bug

Commit 4913907, November 24th 2022

The GenerateGraphicalCandidates was originally added to allow candidates stored to be printed onto the text boxes visible to the user. However, this meant that if the user tried to add any value in that it would not read it and simply override it with the information already stored (which is nothing, unless the drag and drop function was used). There was a fix added to first check if the tile has a number in it before trying to push the candidates in, and if there was, it would update the internal representation effectively allowing users to input their own numbers.

### Candidate pruning bug

Commit 19e75f2, January 24th 2023

When the new candidates for a tile were being checked, for example if a user entered a number, it would simply remove them from the list. This meant that if the user inputted a number and then changed their mind, the number of candidates for a tile would steadily decrease as they were never added back. This was a relatively simple change that made it so that the list would be regenerated in the case that numbers were supposed to be added back, instead of just having candidates disappearing forever.

### Candidate autopruning bug

Commit 53b561e, Janurary 31st 2023

When initialising the sudoku board, the constructor creates 27 segments which are to hold caches of the candidates available within a segment. These were being initialised in the wrong order for what was being used in the later calculations, meaning that the candidates were being flipped as if they were being reflected in the y=-x direction. The order that the segments were added was reversed which solved this problem. Seeing candidates being flipped in y=-x was a perplexing bug.

### Backtracker bug

Commit 1377528, February 9th 2023 - March 7th 2023

This bug took me a long time to find the cause of, and I tried a lot of methods including simple code reading, debug writelines, code breakpoints etc. The bug appeared to be a logic error, where it was calculating the number to place down incorrectly. However, it turned out to not be the case. The cause of the bug was actually remarkably simple and similar in nature to the one fixed in Commit 19e75f2 - when candidates were removed by the backtracker, they weren't being added back in. Since the backtracker excessively adds and removes numbers, this caused it to never complete a sudoku board. It would only complete it in the case that every number was simply the first candidate that was available for that tile in order - which is extremely low chance. This bug was a *significant* delay in the progress of this project.

### GenerateGraphicalCandidates dataflow bug

Commit 973fa61, March 20th 2023

GenerateGraphicalCandidates had programming to allow users to add values to the sudoku board and push that into the main representation, which would then be generated by the graphical functionality. However, when adding the board backtracker and wanting to display the entire solved board after the user presses solve, it would simply override the result with what was already there. A boolean option was added to the function called "a" which would allow the function to be overridden and the solved board to be pushed into the graphical representation. 

### Board Generation bug

Commit dc8308b, March 27th 2023

GetBoard() would call the function GenerateTemplate() to create a completed board, and then prune as many numbers as was appropriate for that difficulty. However, it would check that the board will still solvable by calling Backtracker.SolveBoard(ref board), which would result in the board being checked for completion to be filled back up. It would cause freezes in the program as it would continuously remove one number, then check that it's solved - which fills it back up, and this loops infinitely. This bug was fixed by having a temporary board variable.

### Generation Solvability bug

Commit a23ee4a, March 30th 2023

Allowing the *backtracker* to check whether a puzzle was still solvable was a mistake. This is because, working back from a completed board, a backtracker will always be able to solve it, even if the board is empty backtracking will be able to find a solution. Changing the check to use the board analyser fixed this mistake; only boards that are *human-solvable* are allowed through.

### Board Generation bug #2

Commit 9ebc6d8, April 18th 2023

When creating the initial seeding for a board template, the seeding was sometimes too aggressive in trying to randomise the numbers. This meant that is often caused the program to freeze. The value for seeding was lowered, which stopped this issue.
